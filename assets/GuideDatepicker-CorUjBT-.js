import{r as i,f as F,i as te,h as z,o as b,c as E,a as o,t as C,n as G,G as Y,g as U,e as h,b as H,T as J,l as Q,q as X,u as $,d as N}from"./index-BwCZj-jW.js";import{_ as Z}from"./CalendarItem-BrTa4GWZ.js";const se=["id"],le={class:"form-item"},ne={class:"form-label"},oe=["for","id","aria-control"],ie=["id"],ce=o("span",{class:"sr-only"},"달력 보기",-1),re=[ce],pe=["aria-label"],de={key:0,class:"form-item"},ue={class:"form-label"},ve=["for","id","aria-control"],me=["id"],fe=o("span",{class:"sr-only"},"달력 보기",-1),ke=[fe],ye=["aria-label"],be={class:"modal-body"},he=o("br",null,null,-1),ge=o("span",null,"확인",-1),_e=[ge],I={__name:"DatepickerItem",props:{id:{type:String},pickerOpt:{type:Object}},setup(W){const a=W,c=i(),B=()=>{A(),window.addEventListener("resize",()=>{A()})},A=()=>{window.innerWidth<1024?c.value=!0:c.value=!1},l=i({firstCal:!1,secondCal:!1}),d=i({}),j=()=>{a.pickerOpt&&(d.value.type=a.pickerOpt.type,d.value.sLabel=a.pickerOpt.sLabel,d.value.eLabel=a.pickerOpt.eLabel,a.pickerOpt.start&&(m.value=a.pickerOpt.start,S.value={year:a.pickerOpt.start.split("-")[0],month:a.pickerOpt.start.split("-")[1],date:a.pickerOpt.start.split("-")[2]}),a.pickerOpt.end&&(f.value=a.pickerOpt.end,q.value={year:a.pickerOpt.end.split("-")[0],month:a.pickerOpt.end.split("-")[1],date:a.pickerOpt.end.split("-")[2]}))},w=i({year:F(()=>new Date().getFullYear()),month:F(()=>new Date().getMonth()+1),date:F(()=>new Date().getDate())}),V=i(w.value),m=i(),S=i({}),K=i(w.value),f=i(),q=i({}),M=(t,e)=>{let r=t.month<10?"0"+t.month:t.month,p=t.date<10?"0"+t.date:t.date;e=="start"?(m.value=`${t.year}-${r}-${p}`,S.value=t,V.value=t,l.value.firstCal=!1,g.value.focus()):e=="end"&&(f.value=`${t.year}-${r}-${p}`,q.value=t,K.value=t,l.value.secondCal=!1),c.value&&(document.querySelector("body").removeAttribute("style"),document.querySelector("#app").removeAttribute("aria-hidden")),document.removeEventListener("click",D),document.removeEventListener("keydown",L),ee(e)},P=i(),ee=t=>{let e=new Date(m.value),r=new Date(f.value);e>r&&(O.value=!0,P.value=t)},x=(t,e)=>{let r=window.innerHeight,p=document.querySelector(`#${a.id}-${e}-input`),n=p.getBoundingClientRect().height,k=p.getBoundingClientRect().top;g.value=t.target,e=="start"?(l.value.firstCal=!l.value.firstCal,l.value.secondCal=!1,$(()=>{if(l.value.firstCal){let s=document.querySelector(`#${a.id}-calendar-start`).closest(".dialog-calendar"),_=s.getBoundingClientRect().height,v=k+n+_;c.value||(r>v?s.classList.remove("top"):s.classList.add("top"));const u=()=>{s.querySelector(".date-item.sel").focus(),s.removeEventListener("animationend",u)},y=()=>{s.querySelector(".date-item.today").focus(),s.removeEventListener("animationend",y)};m.value?s.addEventListener("animationend",u):s.addEventListener("animationend",y)}})):(l.value.firstCal=!1,l.value.secondCal=!l.value.secondCal,$(()=>{if(l.value.secondCal){let s=document.querySelector(`#${a.id}-calendar-end`).closest(".dialog-calendar"),_=s.getBoundingClientRect().height,v=k+n+_;c.value||(r>v?s.classList.remove("top"):s.classList.add("top"));const u=()=>{s.querySelector(".date-item.sel").focus(),s.removeEventListener("animationend",u)},y=()=>{s.querySelector(".date-item.today").focus(),s.removeEventListener("animationend",y)};f.value?s.addEventListener("animationend",u):s.addEventListener("animationend",y)}})),c.value&&$(()=>{let s=document.querySelector("body"),_=document.querySelector("#app");s.style.overflowY="hidden",_.setAttribute("aria-hidden",!0)}),document.addEventListener("click",D),document.addEventListener("keydown",L)},g=i(),T=i([]),D=t=>{let e=t.target,r=e.classList.value,p=document.querySelector(`#${a.id}-start-input`),n=document.querySelector(`#${a.id}-end-input`),k=l.value.firstCal?p:n,s=document.querySelector(".dialog-calendar");(l.value.firstCal||l.value.secondCal)&&(s.querySelectorAll("div, h1, button, span").forEach(v=>{let u=v.classList.value;T.value.findIndex(y=>y==u)<0&&T.value.push(u)}),T.value.findIndex(v=>v==r)<0&&!e.closest("form-item")&&!e.classList.contains("cal-btn")&&e!=k&&(l.value.firstCal=!1,l.value.secondCal=!1,$(()=>{if(g.value.focus(),c.value){let v=document.querySelector("body"),u=document.querySelector("#app");v.removeAttribute("style"),u.removeAttribute("aria-hidden")}document.removeEventListener("click",D),document.removeEventListener("keydown",L)})))},L=t=>{if(t.key=="Tab"||t.key=="Escape"){let e=document.activeElement,r=document.querySelector(".dialog-calendar"),p=r.querySelectorAll('.date-item:not([tabindex="-1"]), .prev-cal, .next-cal, .cal-close'),n=p[0],k=p[p.length-1];c.value?t.shiftKey&&(e==n||e==r)?(t.preventDefault(),k.focus()):!t.shiftKey&&e==k&&(t.preventDefault(),n.focus()):(t.shiftKey&&e==n||t.shiftKey&&e==r||!t.shiftKey&&e==k||t.key=="Escape")&&(t.preventDefault(),l.value.firstCal=!1,l.value.secondCal=!1,g.value.focus(),document.removeEventListener("keydown",L))}},R=()=>{c.value&&(l.value.firstCal=!1,l.value.secondCal=!1,g.value.focus(),document.querySelector("body").removeAttribute("style"),document.querySelector("#app").removeAttribute("aria-hidden"),document.removeEventListener("click",D),document.removeEventListener("keydown",L))},O=i(!1),ae=()=>{O.value=!1,$(()=>{g.value.focus(),P.value=="start"?(m.value="",S.value={},V.value=w.value):P.value=="end"&&(f.value="",q.value={},K.value=w.value)})};return te(()=>{B(),j()}),(t,e)=>{const r=z("v-card"),p=z("v-dialog");return b(),E("div",{id:a.id,class:"form-wrap datepicker"},[o("div",le,[o("span",ne,C(d.value.sLabel),1),o("label",{for:`${a.id}-start-btn`,id:`${a.id}-start-input`,class:G(`inp-box ${m.value?"":"placeholder"}`),role:"button","aria-haspopup":"dialog","aria-control":`${a.id}-calendar-start`,tabindex:"0",onKeydown:e[0]||(e[0]=Y(n=>x(n,"start"),["enter"]))},C(m.value?m.value:"날짜를 선택해 주세요"),43,oe),o("button",{type:"button",id:`${a.id}-start-btn`,class:"cal-btn","aria-hidden":"true",tabindex:"-1",onClick:e[1]||(e[1]=n=>x(n,"start"))},re,8,ie),(b(),U(J,{to:"body",disabled:!c.value},[l.value.firstCal?(b(),E("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${d.value.sLabel} 달력`,tabindex:"-1"},[h(Z,{id:`${a.id}-calendar-start`,"is-mobile":c.value,"setup-date":V.value,"checked-date":S.value,onCalAct:e[2]||(e[2]=n=>M(n,"start")),onCalClose:R},null,8,["id","is-mobile","setup-date","checked-date"])],8,pe)):H("",!0)],8,["disabled"]))]),d.value.type=="period"?(b(),E("div",de,[o("span",ue,C(d.value.eLabel),1),o("label",{for:`${a.id}-end-btn`,id:`${a.id}-end-input`,class:G(`inp-box ${f.value?"":"placeholder"}`),role:"button","aria-haspopup":"dialog","aria-control":`${a.id}-calendar-end`,tabindex:"0",onKeydown:e[3]||(e[3]=Y(n=>x(n,"end"),["enter"]))},C(f.value?f.value:"날짜를 선택해 주세요"),43,ve),o("button",{type:"button",id:`${a.id}-end-btn`,class:"cal-btn","aria-hidden":"true",tabindex:"-1",onClick:e[4]||(e[4]=n=>x(n,"end"))},ke,8,me),(b(),U(J,{to:"body",disabled:!c.value},[l.value.secondCal?(b(),E("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${d.value.eLabel} 달력`,tabindex:"-1"},[h(Z,{id:`${a.id}-calendar-end`,"is-mobile":c.value,"setup-date":K.value,"checked-date":q.value,onCalAct:e[5]||(e[5]=n=>M(n,"end")),onCalClose:R},null,8,["id","is-mobile","setup-date","checked-date"])],8,ye)):H("",!0)],8,["disabled"]))])):H("",!0),h(p,{id:"ErrorDatepicker",class:"modal-layout small",modelValue:O.value,"onUpdate:modelValue":e[6]||(e[6]=n=>O.value=n),transition:"dialog-transition"},{default:Q(()=>[h(r,{class:"modal-wrap"},{actions:Q(()=>[o("div",be,[o("p",null,[X(C(d.value.eLabel)+"이 "+C(d.value.sLabel)+"보다 빠릅니다.",1),he,X("다시 선택해 주세요.")])]),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"modal-btn-primary",onClick:ae},_e)])]),_:1})]),_:1},8,["modelValue"])],8,se)}}},Ce={class:"main-contents"},Le=N(`<h2 class="guide-title">Datepicker</h2><div class="guide-info">※ Datepicker 기간 선택 시 alert dialog에만 Vuetify component 사용</div><h3 class="guide-stitle">1. Basic</h3><div class="guide-info script"><pre><span class="comment">// component import</span>
<span class="import">import</span> <span class="props">DatepickerItem</span> <span class="import">from</span> <span class="val">&#39;@/components/DatepickerItem.vue&#39;</span>;

<span class="comment">/** datepicker type option
 * 1. sLabel: picker의 label
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">sLabel:</span> <span class="val">&#39;날짜 선택&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">datepicker-item</span>
    <span class="props">id</span>=<span class="val">&quot;PickerSample1&quot;</span>
    :<span class="props">picker-opt</span>=&quot;<span class="props">pickerOpt</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">datepicker-item</span><span class="arrow">&gt;</span>
</pre></div>`,5),$e={class:"guide-cont"},Ee=N(`<h3 class="guide-stitle">2. Period</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. eLable: 두 번째 picker의 label; type이 single일 때는 생략
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div>`,2),we={class:"guide-cont"},Se=N(`<h3 class="guide-stitle">3. 첫 번째 혹은 두 번째 날짜 값이 있을 때</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. start: 선택된 첫 번째 날짜가 있을 때
 * 4. eLable: 두 번째 picker의 label
 * 5. end: 선택된 두 번째 날짜가 있을 때
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">start:</span> <span class="val">&#39;2024-07-15&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>,
    <span class="props">end:</span> <span class="val">&#39;2024-07-30&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div>`,2),qe={class:"guide-cont"},Oe={__name:"GuideDatepicker",setup(W){const a=i({sLabel:"날짜 선택"}),c=i({type:"period",sLabel:"시작일",eLabel:"종료일"}),B=i({type:"period",sLabel:"시작일",start:"2024-07-15",eLabel:"종료일",end:"2024-07-30"});return(A,l)=>(b(),E("div",Ce,[Le,o("div",$e,[h(I,{id:"PickerSample1","picker-opt":a.value},null,8,["picker-opt"])]),Ee,o("div",we,[h(I,{id:"PickerSample2","picker-opt":c.value},null,8,["picker-opt"])]),Se,o("div",qe,[h(I,{id:"PickerSample3","picker-opt":B.value},null,8,["picker-opt"])])]))}};export{Oe as default};
