import{d as v,e as M,l as z,o as i,c as d,h as b,b as o,u as V,t as g,F as I,i as L,n as K,k as G}from"./index-xp3fYU8o.js";const H=["id","aria-labelledby"],J=o("span",{class:"sr-only"},"달력 닫기",-1),P=[J],Q={class:"calendar-header"},W=["id"],X=o("span",{class:"sr-only"},"년",-1),Z=o("span",{"aria-hidden":"true"},".",-1),j=o("span",{class:"sr-only"},"월",-1),O={class:"calendar-btns",role:"navigation"},ee=["aria-controls"],te=o("span",{class:"sr-only"},"이전 달",-1),ae=[te],le=["aria-controls"],ne=o("span",{class:"sr-only"},"다음 달",-1),oe=[ne],se={class:"calendar-body"},re=["id"],ie={class:"calendar-yoil","aria-hidden":"true"},de={class:"calendar-dates"},ce=["aria-label","data-date"],ue=["aria-label","aria-selected","data-date","tabindex"],ye=["aria-label","data-date"],me={__name:"CalendarItem",props:{id:{type:String},isMobile:{type:Boolean},setupDate:{type:Object},checkedDate:{type:Object}},emits:["calAct","calClose"],setup(E,{emit:R}){const s=E,q=R,F=v(["일","월","화","수","목","금","토"]),c=v({year:s.setupDate.year,month:s.setupDate.month,date:s.setupDate.date,day:new Date(`${s.setupDate.year}-${s.setupDate.month}-${s.setupDate.date}`).getDay()}),Y=v({year:M(()=>new Date().getFullYear()),month:M(()=>new Date().getMonth()+1),date:M(()=>new Date().getDate()),day:M(()=>new Date().getDay())}),u=v([]),A=v([]),x=v([]),N=t=>{let l=new Date(t.year,t.month-1,1).getDay(),e=new Date(t.year,t.month,0).getDate(),p=6-new Date(t.year,t.month,0).getDay(),$=t.month-1==0?t.year-1:t.year,D=t.month-1==0?12:t.month-1,w=new Date($,D,0).getDay(),C=new Date($,D,0).getDate()-w,h=t.year,m=t.month,k=t.month+1>12?t.year+1:t.year,T=t.month+1>12?1:t.month+1;const S=r=>{let a=new Date(r).getDay();return F.value[a]};if(l!==0)for(let r=0;r<=w;r++){let a={};a.year=$,a.month=D,a.date=C+r,a.day=S($+"-"+D+"-"+(C+r)),A.value.push(a)}for(let r=1;r<=e;r++){let a={};a.year=h,a.month=m,a.date=r,a.day=S(h+"-"+m+"-"+r),h==Y.value.year&&m==Y.value.month&&r==Y.value.date&&(a.now=!0),f.value=s.checkedDate,f.value&&a.month==f.value.month&&a.date==f.value.date&&(a.selected=!0),u.value.push(a)}for(let r=1;r<=p;r++){let a={};a.year=k,a.month=T,a.date=r,a.day=S(k+"-"+T+"-"+r),x.value.push(a)}},y=t=>{let l=c.value.year,e=c.value.month;t=="prev"?(e--,e<1&&(e=12,l=l-1)):t=="next"&&(e++,e>12&&(e=1,l=l+1)),c.value={year:l,month:e},u.value=[],A.value=[],x.value=[],N(c.value)},_=v(0),U=t=>{let l=document.querySelectorAll(`#${s.id} .date-item:not(.empty)`),e=_.value;l[e].removeAttribute("tabindex"),t&&(t.key=="ArrowRight"||t.key=="ArrowLeft"||t.key=="ArrowUp"||t.key=="ArrowDown")&&(t.key=="ArrowRight"?(t.preventDefault(),e++,e>l.length-1&&(y("next"),e=0)):t.key=="ArrowLeft"?(t.preventDefault(),e--,e<0&&(y("prev"),e=u.value.length-1)):t.key=="ArrowUp"?(t.preventDefault(),e=e-7,e<0&&(y("prev"),e=u.value.length+e)):t.key=="ArrowDown"&&(t.preventDefault(),e=e+7,e>l.length-1&&(y("next"),e=e-l.length)),G(()=>{let n=document.querySelectorAll(`#${s.id} .date-item:not(.empty)`);for(let p=0;p<n.length-1;p++)n[p].setAttribute("tabindex",-1);_.value=e,n[_.value].focus(),n[_.value].removeAttribute("tabindex")}))},f=v(),B=t=>{let l=t.target.dataset.date,e=document.querySelectorAll(`#${s.id} .date-item:not(.empty)`),n=l.split("-"),p=n[0],$=n[1],D=n[2],w=t.target.classList.contains("prev"),C=t.target.classList.contains("next"),h,m={};(w||C)&&y(w?"prev":"next"),u.value.forEach(k=>{k.selected=!1}),h=u.value.findIndex(k=>k.date==D),u.value[h].selected=!0,m.year=p,m.month=$,m.date=D,f.value=m,_.value=h,e[h].focus(),q("calAct",f.value)};return z(()=>{N(c.value)}),(t,l)=>(i(),d("div",{id:s.id,class:"calendar","aria-labelledby":`${s.id}-label`},[s.isMobile?(i(),d("button",{key:0,type:"button",class:"cal-close",onClick:l[0]||(l[0]=e=>q("calClose"))},P)):b("",!0),o("div",Q,[o("h1",{id:`${s.id}-label`,class:"calendar-tit","aria-live":"assertive"},[V(g(c.value.year),1),X,Z,V(" "+g(c.value.month<10?"0"+c.value.month:c.value.month),1),j],8,W),o("div",O,[o("button",{type:"button",class:"prev-cal",onClick:l[1]||(l[1]=e=>y("prev")),"aria-controls":`${s.id}-body`},ae,8,ee),o("button",{type:"button",class:"next-cal",onClick:l[2]||(l[2]=e=>y("next")),"aria-controls":`${s.id}-body`},oe,8,le)])]),o("div",se,[o("div",{id:`${s.id}-body`,class:"calendar-wrap"},[o("div",ie,[(i(!0),d(I,null,L(F.value,(e,n)=>(i(),d("div",{key:n,class:"yoil-item"},g(e),1))),128))]),o("div",de,[A.value.length>0?(i(!0),d(I,{key:0},L(A.value,(e,n)=>(i(),d("button",{type:"button",key:n,class:"date-item empty prev","aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일`,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:"-1",onClick:B},[o("span",null,g(e.date),1)],8,ce))),128)):b("",!0),(i(!0),d(I,null,L(u.value,(e,n)=>(i(),d("button",{type:"button",key:n,class:K(`date-item${e.empty?" empty":""}${e.now?" today":""}${e.selected?" sel":""}`),"aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일${e.now?" (오늘)":""}${e.selected?" (선택한 날짜)":""}`,"aria-selected":e.selected?e.selected:null,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:n!==_.value?-1:null,onClick:B,onKeydown:U},[o("span",null,g(e.date),1)],42,ue))),128)),x.value.length>0?(i(!0),d(I,{key:1},L(x.value,(e,n)=>(i(),d("button",{type:"button",key:n,class:"date-item empty next","aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일`,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:"-1",onClick:B},[o("span",null,g(e.date),1)],8,ye))),128)):b("",!0)])],8,re)])],8,H))}};export{me as _};
