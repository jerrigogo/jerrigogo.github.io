import{q as J,d as n,e as D,l as Q,o as g,c as h,b as c,t as K,y as T,z as N,a as S,h as B,k as L,v as U}from"./index-Mi4WmjND.js";import{_ as R}from"./CalendarItem-1LWGtIlc.js";const X=["id"],Z={class:"form-item"},j=["for"],ee=["id"],ae=["id","aria-control"],te=c("span",{class:"sr-only"},"달력 보기",-1),se=[te],le=["aria-label"],ne={key:0,class:"form-item"},oe=["for"],ie=["id"],ce=["id","aria-control"],re=c("span",{class:"sr-only"},"달력 보기",-1),de=[re],pe=["aria-label"],F={__name:"DatepickerItem",props:{id:{type:String},pickerOpt:{type:Object}},setup(O){const q=J("systemModal"),t=O,d=n(!1),A=()=>{let a=navigator.userAgent;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)?d.value=!0:d.value=!1},l=n({firstCal:!1,secondCal:!1}),r=n({}),Y=()=>{t.pickerOpt&&(r.value.type=t.pickerOpt.type,r.value.sLabel=t.pickerOpt.sLabel,r.value.eLabel=t.pickerOpt.eLabel)},P=n({year:D(()=>new Date().getFullYear()),month:D(()=>new Date().getMonth()+1),date:D(()=>new Date().getDate())}),M=n(P.value),m=n(),w=n({}),H=n(P.value),k=n(),E=n({}),V=(a,e)=>{let s=a.month<10?"0"+a.month:a.month,i=a.date<10?"0"+a.date:a.date;e=="start"?(m.value=`${a.year}-${s}-${i}`,w.value=a,M.value=a,l.value.firstCal=!1,y.value.focus()):e=="end"&&(k.value=`${a.year}-${s}-${i}`,E.value=a,H.value=a,l.value.secondCal=!1),document.removeEventListener("click",$),document.removeEventListener("keydown",b),z(e)},z=a=>{let e=new Date(m.value),s=new Date(k.value);e>s&&G(a)},G=a=>{let e=document.querySelector(`#${t.id}-${a}-input`);q.open({id:"WrongPeriod",type:"alert",label:"알림 창",cont:`<p>${r.value.eLabel}이 ${r.value.sLabel}보다 빠릅니다.<br />다시 선택해 주세요.</p>`,okText:"확인",okCallback:()=>{e.focus(),L(()=>{a=="start"?(m.value="",w.value={}):a=="end"&&(k.value="",E.value={})})}})},C=a=>{let e=window.innerHeight,s=document.querySelector(`#${t.id}-${a}-input`),i=s.getBoundingClientRect().height,p=s.getBoundingClientRect().top,v=document.querySelector(`#${t.id}-start-btn`),_=document.querySelector(`#${t.id}-end-btn`);if(a=="start"?(l.value.firstCal=!l.value.firstCal,l.value.secondCal=!1,y.value=v,L(()=>{if(l.value.firstCal){let o=document.querySelector(`#${t.id}-calendar-start`).closest(".dialog-calendar"),u=o.getBoundingClientRect().height,f=p+i+u;e>f?o.classList.remove("top"):o.classList.add("top"),o.focus()}})):(l.value.firstCal=!1,l.value.secondCal=!l.value.secondCal,y.value=_,L(()=>{if(l.value.secondCal){let o=document.querySelector(`#${t.id}-calendar-end`).closest(".dialog-calendar"),u=o.getBoundingClientRect().height,f=p+i+u;e>f?o.classList.remove("top"):o.classList.add("top"),o.focus()}})),d.value){let o=document.querySelector("body");o.style.overflowY="hidden"}document.addEventListener("click",$),document.addEventListener("keydown",b)},y=n(),x=n([]),$=a=>{let e=a.target,s=e.classList.value,i=document.querySelector(`#${t.id}-start-input`),p=document.querySelector(`#${t.id}-end-input`),v=l.value.firstCal?i:p,_=document.querySelector(".dialog-calendar");(l.value.firstCal||l.value.secondCal)&&(_.querySelectorAll("div, h1, button, span").forEach(u=>{let f=u.classList.value;x.value.findIndex(W=>W==f)<0&&x.value.push(f)}),x.value.findIndex(u=>u==s)<0&&!e.closest("form-item")&&!e.classList.contains("cal-btn")&&e!=v&&(l.value.firstCal=!1,l.value.secondCal=!1,L(()=>{y.value.focus(),d.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",$),document.removeEventListener("keydown",b)})))},b=a=>{if(a.key=="Tab"){let e=document.activeElement,s=document.querySelector(".dialog-calendar"),i=s.querySelectorAll('.date-item:not([tabindex="-1"]), .prev-cal, .next-cal, .cal-close'),p=i[0],v=i[i.length-1];d.value?a.shiftKey&&(e==p||e==s)?(a.preventDefault(),v.focus()):!a.shiftKey&&e==v&&(a.preventDefault(),p.focus()):(a.shiftKey&&e==p||a.shiftKey&&e==s||!a.shiftKey&&e==v)&&(a.preventDefault(),l.value.firstCal=!1,l.value.secondCal=!1,y.value.focus(),d.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("keydown",b))}},I=()=>{d.value&&(l.value.firstCal=!1,l.value.secondCal=!1,document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",$),document.removeEventListener("keydown",b))};return Q(()=>{Y(),A()}),(a,e)=>(g(),h("div",{id:t.id,class:"form-wrap datepicker"},[c("div",Z,[c("label",{for:`${t.id}-start-input`,class:"form-label"},K(r.value.sLabel),9,j),T(c("input",{type:"tel",id:`${t.id}-start-input`,name:"start",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),readonly:"",onClick:e[1]||(e[1]=s=>C("start"))},null,8,ee),[[N,m.value]]),c("button",{type:"button",id:`${t.id}-start-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${t.id}-calendar-start`,onClick:e[2]||(e[2]=s=>C("start"))},se,8,ae),l.value.firstCal?(g(),h("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.sLabel} 달력`,tabindex:"-1"},[S(R,{id:`${t.id}-calendar-start`,"is-mobile":d.value,"setup-date":M.value,"checked-date":w.value,onCalAct:e[3]||(e[3]=s=>V(s,"start")),onCalClose:I},null,8,["id","is-mobile","setup-date","checked-date"])],8,le)):B("",!0)]),r.value.type=="period"?(g(),h("div",ne,[c("label",{for:`${t.id}-end-input`,class:"form-label"},K(r.value.eLabel),9,oe),T(c("input",{type:"tel",id:`${t.id}-end-input`,name:"end",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[4]||(e[4]=s=>k.value=s),readonly:"",onClick:e[5]||(e[5]=s=>C("end"))},null,8,ie),[[N,k.value]]),c("button",{type:"button",id:`${t.id}-end-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${t.id}-calendar-end`,onClick:e[6]||(e[6]=s=>C("end"))},de,8,ce),l.value.secondCal?(g(),h("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.eLabel} 달력`,tabindex:"-1"},[S(R,{id:`${t.id}-calendar-end`,"setup-date":H.value,"checked-date":E.value,onCalAct:e[7]||(e[7]=s=>V(s,"end")),onCalClose:I},null,8,["id","setup-date","checked-date"])],8,pe)):B("",!0)])):B("",!0)],8,X))}},ue={class:"contents"},ve=U(`<h2 class="guide-title">Datepicker</h2><h3 class="guide-stitle">1. Basic</h3><div class="guide-info script"><pre><span class="comment">/** datepicker type option
 * 1. sLabel: picker의 label
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">sLabel:</span> <span class="val">&#39;날짜 선택&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">datepicker-item</span>
    <span class="props">id</span>=<span class="val">&quot;PickerSample1&quot;</span>
    :<span class="props">picker-opt</span>=&quot;<span class="props">pickerOpt</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">datepicker-item</span><span class="arrow">&gt;</span>
</pre></div>`,4),fe={class:"guide-cont"},me=U(`<h3 class="guide-stitle">2. Period</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. eLable: 두 번째 picker의 label; type이 single일 때는 생략
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt2</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">datepicker-item</span>
    <span class="props">id</span>=<span class="val">&quot;PickerSample2&quot;</span>
    :<span class="props">picker-opt</span>=&quot;<span class="props">pickerOpt2</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">datepicker-item</span><span class="arrow">&gt;</span>
</pre></div>`,3),ke={class:"guide-cont"},ge={__name:"GuideDatepicker",setup(O){const q=n({sLabel:"날짜 선택"}),t=n({type:"period",sLabel:"시작일",eLabel:"종료일"});return(d,A)=>(g(),h("div",ue,[ve,c("div",fe,[S(F,{id:"PickerSample1","picker-opt":q.value},null,8,["picker-opt"])]),me,c("div",ke,[S(F,{id:"PickerSample2","picker-opt":t.value},null,8,["picker-opt"])])]))}};export{ge as default};
