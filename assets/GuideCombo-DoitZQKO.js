import{d as v,k as I,g as U,x as V,o as u,c as b,b as d,t as h,p as T,y as N,z as H,F as K,h as M,a as g,v as w}from"./index-UbvIKTGA.js";const j={class:"select-box"},R=["aria-label","aria-owns"],F={key:0,class:"placeholder"},P=["id","aria-controls","aria-activedescendant"],z=["id"],G=["id","data-value"],_={__name:"ComboBox",props:{id:{type:String},comboTitle:{type:String},comboName:{type:String},comboOptions:{type:Object},placeholder:{type:String}},setup(f){const e=f,p=v({}),r=v(!0),l=v(),E=()=>{let n=e.comboOptions.findIndex(o=>o.selected==!0),a=n>0&&e.comboOptions[n],s=n>0&&a.label,t=n>0&&a.value;p.value.label=s||"",p.value.value=t||"",l.value=n,l.value>-1?r.value=!1:r.value=!0};I(()=>{E()});const x=()=>{let n=document.querySelector(`#${e.id}_combo`),a=window.event;document.activeElement==n&&(a.key=="ArrowUp"||a.key=="ArrowDown")&&(a.key=="ArrowDown"?(a.preventDefault(),l.value++,l.value>e.comboOptions.length-1&&(l.value=e.comboOptions.length-1)):a.key=="ArrowUp"&&(a.preventDefault(),l.value--,l.value<0&&(l.value=0)),r.value=!1,p.value.label=e.comboOptions[l.value].label,p.value.value=e.comboOptions[l.value].value)};U(()=>{document.addEventListener("keydown",x)}),V(()=>{document.removeEventListener("keydown",x)});const q=n=>{n.key=="Enter"&&(n.preventDefault(),S())},S=()=>{let n=window.innerHeight,a=document.querySelectorAll(".select-box .selbox-btn"),s=document.querySelectorAll(".selbox-list"),t=document.querySelectorAll(".selbox-opt"),o=document.querySelector(`#${e.id}_combo`),c=document.querySelector(`#${e.id}_listbox`),m=p.value.label?e.comboOptions.findIndex(i=>i.label==p.value.label):0,L=c.querySelectorAll("li")[m],$=o.getBoundingClientRect().top,B=o.getBoundingClientRect().height;a.forEach(i=>{i.setAttribute("aria-expanded",!1)}),s.forEach(i=>{i.style.display="none"}),t.forEach(i=>{i.setAttribute("tabindex",-1)}),o.closest(".selbox-btn").setAttribute("aria-expanded",!0),c.style.display="block",c.querySelectorAll(".selbox-opt").forEach(i=>{i.setAttribute("tabindex",0)});let D=c.getBoundingClientRect().height,C=$+B+D;n>C?c.classList.remove("top"):c.classList.add("top"),L.focus(),A(),document.addEventListener("click",y)},A=()=>{let n=document.querySelector(`#${e.id}_listbox`),a=n.querySelectorAll(".selbox-opt");n.addEventListener("keydown",O),a.forEach((s,t)=>{s.addEventListener("click",()=>{l.value=t,k(t)})})},k=n=>{let a=document.querySelector(`#${e.id}_combo`),s=document.querySelector(`#${e.id}_listbox`),t=e.comboOptions[n],o=t.label,c=t.value;p.value.label=o,p.value.value=c,s.style.display="none",s.querySelectorAll(".selbox-opt").forEach(m=>{m.setAttribute("tabindex",-1)}),r.value=!1,a.focus()},O=()=>{let a=document.querySelector(`#${e.id}_listbox`).querySelectorAll(".selbox-opt"),s=window.event;(s.key=="ArrowDown"||s.key=="ArrowUp")&&(s.key=="ArrowDown"?(s.preventDefault(),l.value++,l.value>e.comboOptions.length-1&&(l.value=e.comboOptions.length-1)):s.key=="ArrowUp"&&(s.preventDefault(),l.value--,l.value<0&&(l.value=0)),a[l.value].focus());let t=document.activeElement;if(s.key=="Tab"&&(s.shiftKey?(l.value--,l.value<0&&(l.value=0),t==a[0]&&(s.preventDefault(),a[0].focus())):s.shiftKey||(l.value++,l.value>e.comboOptions.length-1&&(l.value=e.comboOptions.length-1),t==a[a.length-1]&&(s.preventDefault(),a[a.length-1].focus()))),s.key=="Enter"){let o=e.comboOptions.findIndex(c=>c.value==document.activeElement.getAttribute("data-value"));l.value=o,k(o)}},y=()=>{let n=document.querySelectorAll(".select-box .selbox-btn"),a=document.querySelectorAll(".selbox-list"),s=document.querySelectorAll(".selbox-opt"),t=window.event;t.target.classList.contains("selbox-input")||t.target.classList.contains("selbox-opt")||(n.forEach(o=>{o.setAttribute("aria-expanded",!1)}),a.forEach(o=>{o.style.display="none",document.removeEventListener("click",y)}),s.forEach(o=>{o.setAttribute("tabindex",-1)}),l.value="")};return(n,a)=>(u(),b("div",j,[d("span",{class:"selbox-btn",role:"combobox","aria-label":e.comboTitle,"aria-expanded":"false","aria-owns":`${e.id}_listbox`,"aria-haspopup":"listbox"},[r.value?(u(),b("span",F,h(e.placeholder),1)):T("",!0),N(d("input",{type:"text",id:`${e.id}_combo`,class:"selbox-input","aria-autocomplete":"list","aria-controls":`${e.id}_listbox`,"aria-activedescendant":p.value.selId,"aria-readonly":"true","onUpdate:modelValue":a[0]||(a[0]=s=>p.value.label=s),readonly:"",onClick:a[1]||(a[1]=s=>S()),onKeydown:a[2]||(a[2]=s=>q(s))},null,40,P),[[H,p.value.label]])],8,R),d("ul",{id:`${e.id}_listbox`,class:"selbox-list",role:"listbox",style:{display:"none"}},[(u(!0),b(K,null,M(e.comboOptions,(s,t)=>(u(),b("li",{key:t,class:"selbox-opt",role:"option",id:`${e.id}_opt${t+1}`,"data-value":s.value,tabindex:"-1"},h(s.label),9,G))),128))],8,z)]))}},J={class:"contents"},Q=w(`<h2 class="guide-title">Select(combo-box)</h2><h3 class="guide-stitle">1. Basic</h3><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">combo-box</span>
    <span class="props">id</span>=&quot;<span class="val">comboExamle1</span>&quot;
    :<span class="props">combo-title</span>=&quot;<span class="val">\`Select Exmaple1\`</span>&quot;
    :<span class="props">combo-name</span>=&quot;<span class="val">\`example1\`</span>&quot;
    :<span class="props">combo-options</span>=&quot;<span class="props">options</span>&quot;
    :<span class="props">placeholder</span>=&quot;<span class="val">\`선택하세요\`</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">combo-box</span><span class="arrow">&gt;</span>
</pre></div><div class="guide-info script"><pre><span class="tag">const</span> <span class="evt">options</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">[</span>
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option1&#39;</span>, <span class="props">value:</span> <span class="val">&#39;1&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option2&#39;</span>, <span class="props">value:</span> <span class="val">&#39;2&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option3&#39;</span>, <span class="props">value:</span> <span class="val">&#39;3&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option4&#39;</span>, <span class="props">value:</span> <span class="val">&#39;4&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option5&#39;</span>, <span class="props">value:</span> <span class="val">&#39;5&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option6&#39;</span>, <span class="props">value:</span> <span class="val">&#39;6&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option7&#39;</span>, <span class="props">value:</span> <span class="val">&#39;7&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option8&#39;</span>, <span class="props">value:</span> <span class="val">&#39;8&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option9&#39;</span>, <span class="props">value:</span> <span class="val">&#39;9&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option10&#39;</span>, <span class="props">value:</span> <span class="val">&#39;10&#39;</span> <span class="braket">}</span>
<span class="func">]</span><span class="mark">)</span>;
</pre></div>`,4),W={class:"guide-cont"},X=w(`<h3 class="guide-stitle">2. Selected</h3><div class="guide-info">부여할 option 목록에서 &quot;selected: true&quot; 추가</div><div class="guide-info script"><pre><span class="tag">const</span> <span class="evt">options2</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">[</span>
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option1&#39;</span>, <span class="props">value:</span> <span class="val">&#39;1&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option2&#39;</span>, <span class="props">value:</span> <span class="val">&#39;2&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option3&#39;</span>, <span class="props">value:</span> <span class="val">&#39;3&#39;</span>, <span class="props">selected:</span> <span class="tag">true</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option4&#39;</span>, <span class="props">value:</span> <span class="val">&#39;4&#39;</span> <span class="braket">}</span>,
    <span class="braket">{</span> <span class="props">label:</span> <span class="val">&#39;Select option5&#39;</span>, <span class="props">value:</span> <span class="val">&#39;5&#39;</span> <span class="braket">}</span>,
<span class="func">]</span><span class="mark">)</span>;
</pre></div>`,3),Y={class:"guide-cont"},ss={__name:"GuideCombo",setup(f){const e=v([{label:"Select option1",value:"1"},{label:"Select option2",value:"2"},{label:"Select option3",value:"3"},{label:"Select option4",value:"4"},{label:"Select option5",value:"5"},{label:"Select option6",value:"6"},{label:"Select option7",value:"7"},{label:"Select option8",value:"8"},{label:"Select option9",value:"9"},{label:"Select option10",value:"10"}]),p=v([{label:"Select option1",value:"1"},{label:"Select option2",value:"2"},{label:"Select option3",value:"3",selected:!0},{label:"Select option4",value:"4"},{label:"Select option5",value:"5"}]);return(r,l)=>(u(),b("div",J,[Q,d("div",W,[g(_,{id:"comboExamle1","combo-title":"Select Exmaple1","combo-name":"example1","combo-options":e.value,placeholder:"선택하세요"},null,8,["combo-options"])]),X,d("div",Y,[g(_,{id:"comboExamle2","combo-title":"Select Exmaple2","combo-name":"example2","combo-options":p.value,placeholder:"선택하세요"},null,8,["combo-options"])])]))}};export{ss as default};
