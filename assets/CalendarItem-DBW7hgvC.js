import{d as v,e as k,k as K,o as d,c,b as s,u as T,t as g,F as I,h as L,p as V,n as G,j as H}from"./index-Cm2PioRV.js";const J=["id","aria-labelledby"],P={class:"calendar-header"},Q=["id"],W=s("span",{class:"sr-only"},"년",-1),X=s("span",{"aria-hidden":"true"},".",-1),Z=s("span",{class:"sr-only"},"월",-1),b={class:"calendar-btns",role:"navigation"},j=["aria-controls"],O=s("span",{class:"sr-only"},"이전 달",-1),ee=[O],te=["aria-controls"],ae=s("span",{class:"sr-only"},"다음 달",-1),le=[ae],ne={class:"calendar-body"},oe=["id"],se={class:"calendar-yoil","aria-hidden":"true"},re={class:"calendar-dates"},ie=["aria-label","data-date"],de=["aria-label","aria-selected","data-date","tabindex"],ce=["aria-label","data-date"],ye={__name:"CalendarItem",props:{id:{type:String},setupDate:{type:Object}},emits:["calAct"],setup(E,{emit:R}){const r=E,U=R,q=v(["일","월","화","수","목","금","토"]),i=v({year:r.setupDate.year,month:r.setupDate.month,date:r.setupDate.date,day:k(()=>new Date(`${r.setupDate.year}-${r.setupDate.month}-${r.setupDate.date}`).getDay())}),Y=v({year:k(()=>new Date().getFullYear()),month:k(()=>new Date().getMonth()+1),date:k(()=>new Date().getDate()),day:k(()=>new Date().getDay())}),u=v([]),A=v([]),x=v([]),F=t=>{let l=new Date(t.year,t.month-1,1).getDay(),e=new Date(t.year,t.month,0).getDate(),p=6-new Date(t.year,t.month,0).getDay(),f=t.month-1==0?t.year-1:t.year,D=t.month-1==0?12:t.month-1,w=new Date(f,D,0).getDay(),M=new Date(f,D,0).getDate()-w,h=t.year,m=t.month,$=t.month+1>12?t.year+1:t.year,N=t.month+1>12?1:t.month+1;u.value=[],A.value=[],x.value=[];const B=o=>{let a=new Date(o).getDay();return q.value[a]};if(l!==0)for(let o=0;o<=w;o++){let a={};a.year=f,a.month=D,a.date=M+o,a.day=B(f+"-"+D+"-"+(M+o)),A.value.push(a)}for(let o=1;o<=e;o++){let a={};a.year=h,a.month=m,a.date=o,a.day=B(h+"-"+m+"-"+o),h==Y.value.year&&m==Y.value.month&&o==Y.value.date&&(a.now=!0),C.value&&a.month==C.value.month&&a.date==C.value.date&&(a.selected=!0),u.value.push(a)}for(let o=1;o<=p;o++){let a={};a.year=$,a.month=N,a.date=o,a.day=B($+"-"+N+"-"+o),x.value.push(a)}},y=t=>{let l=i.value.year,e=i.value.month;t=="prev"?(e--,e<1&&(e=12,l=l-1)):t=="next"&&(e++,e>12&&(e=1,l=l+1)),i.value={year:l,month:e},F(i.value)},_=v(0),z=t=>{let l=document.querySelectorAll(`#${r.id} .date-item:not(.empty)`),e=_.value;l[e].removeAttribute("tabindex"),t&&(t.key=="ArrowRight"||t.key=="ArrowLeft"||t.key=="ArrowUp"||t.key=="ArrowDown")&&(t.key=="ArrowRight"?(t.preventDefault(),e++,e>l.length-1&&(y("next"),e=0)):t.key=="ArrowLeft"?(t.preventDefault(),e--,e<0&&(y("prev"),e=u.value.length-1)):t.key=="ArrowUp"?(t.preventDefault(),e=e-7,e<0&&(y("prev"),e=u.value.length+e)):t.key=="ArrowDown"&&(t.preventDefault(),e=e+7,e>l.length-1&&(y("next"),e=e-l.length)),H(()=>{let n=document.querySelectorAll(`#${r.id} .date-item:not(.empty)`);for(let p=0;p<n.length-1;p++)n[p].setAttribute("tabindex",-1);_.value=e,n[_.value].focus(),n[_.value].removeAttribute("tabindex")}))},C=v(),S=t=>{let l=t.target.dataset.date,e=document.querySelectorAll(`#${r.id} .date-item:not(.empty)`),n=l.split("-"),p=n[0],f=n[1],D=n[2],w=t.target.classList.contains("prev"),M=t.target.classList.contains("next"),h,m={};(w||M)&&y(w?"prev":"next"),u.value.forEach($=>{$.selected=!1}),h=u.value.findIndex($=>$.date==D),u.value[h].selected=!0,m.year=p,m.month=f,m.date=D,C.value=m,_.value=h,e[h].focus(),U("calAct",l)};return K(()=>{F(i.value)}),(t,l)=>(d(),c("div",{id:r.id,class:"calendar","aria-labelledby":`${r.id}-label`},[s("div",P,[s("h1",{id:`${r.id}-label`,class:"calendar-tit","aria-live":"assertive"},[T(g(i.value.year),1),W,X,T(" "+g(i.value.month<10?"0"+i.value.month:i.value.month),1),Z],8,Q),s("div",b,[s("button",{type:"button",class:"prev-cal",onClick:l[0]||(l[0]=e=>y("prev")),"aria-controls":`${r.id}-body`},ee,8,j),s("button",{type:"button",class:"next-cal",onClick:l[1]||(l[1]=e=>y("next")),"aria-controls":`${r.id}-body`},le,8,te)])]),s("div",ne,[s("div",{id:`${r.id}-body`,class:"calendar-wrap"},[s("div",se,[(d(!0),c(I,null,L(q.value,(e,n)=>(d(),c("div",{key:n,class:"yoil-item"},g(e),1))),128))]),s("div",re,[A.value.length>0?(d(!0),c(I,{key:0},L(A.value,(e,n)=>(d(),c("button",{type:"button",key:n,class:"date-item empty prev","aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일`,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:"-1",onClick:S},[s("span",null,g(e.date),1)],8,ie))),128)):V("",!0),(d(!0),c(I,null,L(u.value,(e,n)=>(d(),c("button",{type:"button",key:n,class:G(`date-item${e.empty?" empty":""}${e.now?" today":""}${e.selected?" sel":""}`),"aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일${e.now?" (오늘)":""}${e.selected?" (선택한 날짜)":""}`,"aria-selected":e.selected?e.selected:null,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:n!==_.value?-1:null,onClick:S,onKeydown:z},[s("span",null,g(e.date),1)],42,de))),128)),x.value.length>0?(d(!0),c(I,{key:1},L(x.value,(e,n)=>(d(),c("button",{type:"button",key:n,class:"date-item empty next","aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일`,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:"-1",onClick:S},[s("span",null,g(e.date),1)],8,ce))),128)):V("",!0)])],8,oe)])],8,J))}};export{ye as _};
