import{q as X,d as n,e as R,f as B,o as h,c as g,b as c,t as W,v as F,x as U,a as C,h as A,y as O,u as M}from"./index-CytIcuzL.js";import{_ as Y}from"./CalendarItem-DRdi-6H_.js";const Z=["id"],j={class:"form-item"},ee=["for"],ae=["id"],se=["id","aria-control"],te=c("span",{class:"sr-only"},"달력 보기",-1),le=[te],ne=["aria-label"],oe={key:0,class:"form-item"},ie=["for"],ce=["id"],pe=["id","aria-control"],re=c("span",{class:"sr-only"},"달력 보기",-1),de=[re],ue=["aria-label"],P={__name:"DatepickerItem",props:{id:{type:String},pickerOpt:{type:Object}},setup(H){const q=X("systemModal"),a=H,o=n(),D=()=>{E(),window.addEventListener("resize",()=>{E()})},E=()=>{window.innerWidth<1024?o.value=!0:o.value=!1};R(()=>D());const l=n({firstCal:!1,secondCal:!1}),r=n({}),z=()=>{a.pickerOpt&&(r.value.type=a.pickerOpt.type,r.value.sLabel=a.pickerOpt.sLabel,r.value.eLabel=a.pickerOpt.eLabel,a.pickerOpt.start&&(m.value=a.pickerOpt.start,_.value={year:a.pickerOpt.start.split("-")[0],month:a.pickerOpt.start.split("-")[1],date:a.pickerOpt.start.split("-")[2]}),a.pickerOpt.end&&(f.value=a.pickerOpt.end,$.value={year:a.pickerOpt.end.split("-")[0],month:a.pickerOpt.end.split("-")[1],date:a.pickerOpt.end.split("-")[2]}))},I=n({year:B(()=>new Date().getFullYear()),month:B(()=>new Date().getMonth()+1),date:B(()=>new Date().getDate())}),V=n(I.value),m=n(),_=n({}),K=n(I.value),f=n(),$=n({}),T=(s,e)=>{let t=s.month<10?"0"+s.month:s.month,p=s.date<10?"0"+s.date:s.date;e=="start"?(m.value=`${s.year}-${t}-${p}`,_.value=s,V.value=s,l.value.firstCal=!1,y.value.focus()):e=="end"&&(f.value=`${s.year}-${t}-${p}`,$.value=s,K.value=s,l.value.secondCal=!1),o.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",w),document.removeEventListener("keydown",b),G(e)},G=s=>{let e=new Date(m.value),t=new Date(f.value);e>t&&J(s)},J=s=>{let e=document.querySelector(`#${a.id}-${s}-input`);q.open({id:"WrongPeriod",type:"alert",label:"알림 창",cont:`<p>${r.value.eLabel}이 ${r.value.sLabel}보다 빠릅니다.<br />다시 선택해 주세요.</p>`,okText:"확인",okCallback:()=>{e.focus(),O(()=>{s=="start"?(m.value="",_.value={}):s=="end"&&(f.value="",$.value={})})}})},L=s=>{let e=window.innerHeight,t=document.querySelector(`#${a.id}-${s}-input`),p=t.getBoundingClientRect().height,d=t.getBoundingClientRect().top,v=document.querySelector(`#${a.id}-start-btn`),S=document.querySelector(`#${a.id}-end-btn`);if(s=="start"?(l.value.firstCal=!l.value.firstCal,l.value.secondCal=!1,y.value=v,O(()=>{if(l.value.firstCal){let i=document.querySelector(`#${a.id}-calendar-start`).closest(".dialog-calendar"),u=i.getBoundingClientRect().height,k=d+p+u;o.value||(e>k?i.classList.remove("top"):i.classList.add("top")),i.focus()}})):(l.value.firstCal=!1,l.value.secondCal=!l.value.secondCal,y.value=S,O(()=>{if(l.value.secondCal){let i=document.querySelector(`#${a.id}-calendar-end`).closest(".dialog-calendar"),u=i.getBoundingClientRect().height,k=d+p+u;o.value||(e>k?i.classList.remove("top"):i.classList.add("top")),i.focus()}})),o.value){let i=document.querySelector("body");i.style.overflowY="hidden"}document.addEventListener("click",w),document.addEventListener("keydown",b)},y=n(),x=n([]),w=s=>{let e=s.target,t=e.classList.value,p=document.querySelector(`#${a.id}-start-input`),d=document.querySelector(`#${a.id}-end-input`),v=l.value.firstCal?p:d,S=document.querySelector(".dialog-calendar");(l.value.firstCal||l.value.secondCal)&&(S.querySelectorAll("div, h1, button, span").forEach(u=>{let k=u.classList.value;x.value.findIndex(Q=>Q==k)<0&&x.value.push(k)}),x.value.findIndex(u=>u==t)<0&&!e.closest("form-item")&&!e.classList.contains("cal-btn")&&e!=v&&(l.value.firstCal=!1,l.value.secondCal=!1,O(()=>{y.value.focus(),o.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",w),document.removeEventListener("keydown",b)})))},b=s=>{if(s.key=="Tab"){let e=document.activeElement,t=document.querySelector(".dialog-calendar"),p=t.querySelectorAll('.date-item:not([tabindex="-1"]), .prev-cal, .next-cal, .cal-close'),d=p[0],v=p[p.length-1];o.value?s.shiftKey&&(e==d||e==t)?(s.preventDefault(),v.focus()):!s.shiftKey&&e==v&&(s.preventDefault(),d.focus()):(s.shiftKey&&e==d||s.shiftKey&&e==t||!s.shiftKey&&e==v)&&(s.preventDefault(),l.value.firstCal=!1,l.value.secondCal=!1,y.value.focus(),o.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("keydown",b))}},N=()=>{o.value&&(l.value.firstCal=!1,l.value.secondCal=!1,document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",w),document.removeEventListener("keydown",b))};return R(()=>{z(),D()}),(s,e)=>(h(),g("div",{id:a.id,class:"form-wrap datepicker"},[c("div",j,[c("label",{for:`${a.id}-start-input`,class:"form-label"},W(r.value.sLabel),9,ee),F(c("input",{type:"tel",id:`${a.id}-start-input`,name:"start",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),readonly:"",onClick:e[1]||(e[1]=t=>L("start"))},null,8,ae),[[U,m.value]]),c("button",{type:"button",id:`${a.id}-start-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${a.id}-calendar-start`,onClick:e[2]||(e[2]=t=>L("start"))},le,8,se),l.value.firstCal?(h(),g("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.sLabel} 달력`,tabindex:"-1"},[C(Y,{id:`${a.id}-calendar-start`,"is-mobile":o.value,"setup-date":V.value,"checked-date":_.value,onCalAct:e[3]||(e[3]=t=>T(t,"start")),onCalClose:N},null,8,["id","is-mobile","setup-date","checked-date"])],8,ne)):A("",!0)]),r.value.type=="period"?(h(),g("div",oe,[c("label",{for:`${a.id}-end-input`,class:"form-label"},W(r.value.eLabel),9,ie),F(c("input",{type:"tel",id:`${a.id}-end-input`,name:"end",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),readonly:"",onClick:e[5]||(e[5]=t=>L("end"))},null,8,ce),[[U,f.value]]),c("button",{type:"button",id:`${a.id}-end-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${a.id}-calendar-end`,onClick:e[6]||(e[6]=t=>L("end"))},de,8,pe),l.value.secondCal?(h(),g("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.eLabel} 달력`,tabindex:"-1"},[C(Y,{id:`${a.id}-calendar-end`,"is-mobile":o.value,"setup-date":K.value,"checked-date":$.value,onCalAct:e[7]||(e[7]=t=>T(t,"end")),onCalClose:N},null,8,["id","is-mobile","setup-date","checked-date"])],8,ue)):A("",!0)])):A("",!0)],8,Z))}},ve={class:"contents"},me=M(`<h2 class="guide-title">Datepicker</h2><h3 class="guide-stitle">1. Basic</h3><div class="guide-info script"><pre><span class="comment">// component import</span>
<span class="import">import</span> <span class="props">DatepickerItem</span> <span class="import">from</span> <span class="val">&#39;@/components/DatepickerItem.vue&#39;</span>;

<span class="comment">/** datepicker type option
 * 1. sLabel: picker의 label
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">sLabel:</span> <span class="val">&#39;날짜 선택&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">datepicker-item</span>
    <span class="props">id</span>=<span class="val">&quot;PickerSample1&quot;</span>
    :<span class="props">picker-opt</span>=&quot;<span class="props">pickerOpt</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">datepicker-item</span><span class="arrow">&gt;</span>
</pre></div>`,4),fe={class:"guide-cont"},ke=M(`<h3 class="guide-stitle">2. Period</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. eLable: 두 번째 picker의 label; type이 single일 때는 생략
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div>`,2),ye={class:"guide-cont"},be=M(`<h3 class="guide-stitle">3. 첫 번째 혹은 두 번째 날짜 값이 있을 때</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. start: 선택된 첫 번째 날짜가 있을 때
 * 4. eLable: 두 번째 picker의 label
 * 5. end: 선택된 두 번째 날짜가 있을 때
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">start:</span> <span class="val">&#39;2024-07-15&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>,
    <span class="props">end:</span> <span class="val">&#39;2024-07-30&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div>`,2),he={class:"guide-cont"},_e={__name:"GuideDatepicker",setup(H){const q=n({sLabel:"날짜 선택"}),a=n({type:"period",sLabel:"시작일",eLabel:"종료일"}),o=n({type:"period",sLabel:"시작일",start:"2024-07-15",eLabel:"종료일",end:"2024-07-30"});return(D,E)=>(h(),g("div",ve,[me,c("div",fe,[C(P,{id:"PickerSample1","picker-opt":q.value},null,8,["picker-opt"])]),ke,c("div",ye,[C(P,{id:"PickerSample2","picker-opt":a.value},null,8,["picker-opt"])]),be,c("div",he,[C(P,{id:"PickerSample3","picker-opt":o.value},null,8,["picker-opt"])])]))}};export{_e as default};
