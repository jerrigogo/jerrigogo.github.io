import{r as h,f as x,i as G,o as u,c,b,a as s,q as E,t as w,F as C,k as I,n as H,u as R}from"./index-IN-5UTd3.js";const J=["id","aria-labelledby"],P=s("span",{class:"sr-only"},"달력 닫기",-1),Q=[P],W={class:"calendar-header"},X=["id"],Z=s("span",{class:"sr-only"},"년",-1),j=s("span",{"aria-hidden":"true"},".",-1),O=s("span",{class:"sr-only"},"월",-1),ee={class:"calendar-btns",role:"navigation"},te=["aria-controls"],ae=s("span",{class:"sr-only"},"이전 달",-1),le=[ae],ne=["aria-controls"],oe=s("span",{class:"sr-only"},"다음 달",-1),se=[oe],re={class:"calendar-body"},ie=["id"],de={class:"calendar-yoil","aria-hidden":"true"},ue={class:"calendar-dates"},ce=["aria-label","data-date"],ye=["aria-label","aria-selected","data-date","tabindex"],he=["aria-label","data-date"],ve={__name:"CalendarItem",props:{id:{type:String},isMobile:{type:Boolean},setupDate:{type:Object},checkedDate:{type:Object}},emits:["calAct","calClose"],setup(U,{emit:z}){const r=U,q=z,F=h(["일","월","화","수","목","금","토"]),y=h({year:r.setupDate.year,month:r.setupDate.month,date:r.setupDate.date,day:new Date(`${r.setupDate.year}-${r.setupDate.month}-${r.setupDate.date}`).getDay()}),M=h({year:x(()=>new Date().getFullYear()),month:x(()=>new Date().getMonth()+1),date:x(()=>new Date().getDate()),day:x(()=>new Date().getDay())}),i=h([]),g=h([]),A=h([]),N=t=>{let n=new Date(t.year,t.month-1,1).getDay(),e=new Date(t.year,t.month,0).getDate(),m=6-new Date(t.year,t.month,0).getDay(),k=t.month-1==0?t.year-1:t.year,v=t.month-1==0?12:t.month-1,p=new Date(k,v,0).getDay(),D=new Date(k,v,0).getDate()-p,f=t.year,B=t.month,T=t.month+1>12?t.year+1:t.year,V=t.month+1>12?1:t.month+1;const L=l=>{let a=new Date(l).getDay();return F.value[a]};if(n!==0)for(let l=0;l<=p;l++){let a={};a.year=k,a.month=v,a.date=D+l,a.day=L(k+"-"+v+"-"+(D+l)),g.value.push(a)}for(let l=1;l<=e;l++){let a={};a.year=f,a.month=B,a.date=l,a.day=L(f+"-"+B+"-"+l),f==M.value.year&&B==M.value.month&&l==M.value.date&&(a.now=!0),$.value=r.checkedDate,$.value&&a.month==$.value.month&&a.date==$.value.date&&(a.selected=!0),i.value.push(a)}for(let l=1;l<=m;l++){let a={};a.year=T,a.month=V,a.date=l,a.day=L(T+"-"+V+"-"+l),A.value.push(a)}R(()=>{let l=i.value.findIndex(S=>S.selected==!0),a=i.value.findIndex(S=>S.now==!0);l>-1&&a>-1||l>-1&&a<0?d.value=l:l<0&&a>-1?d.value=a:!l&&!a&&(d.value=0)})},_=t=>{let n=y.value.year,e=y.value.month;t=="prev"?(e--,e<1&&(e=12,n=n-1)):t=="next"&&(e++,e>12&&(e=1,n=n+1)),y.value={year:n,month:e},i.value=[],g.value=[],A.value=[],N(y.value)},d=h(0),K=t=>{let n=document.querySelectorAll(`#${r.id} .date-item:not(.empty)`),e=d.value;n[e].removeAttribute("tabindex"),t&&(t.key=="ArrowRight"||t.key=="ArrowLeft"||t.key=="ArrowUp"||t.key=="ArrowDown")&&(t.key=="ArrowRight"?(t.preventDefault(),e++,e>n.length-1&&(_("next"),e=0)):t.key=="ArrowLeft"?(t.preventDefault(),e--,e<0&&(_("prev"),e=i.value.length-1)):t.key=="ArrowUp"?(t.preventDefault(),e=e-7,e<0&&(_("prev"),e=i.value.length+e)):t.key=="ArrowDown"&&(t.preventDefault(),e=e+7,e>n.length-1&&(_("next"),e=e-n.length)),R(()=>{let o=document.querySelectorAll(`#${r.id} .date-item:not(.empty)`);for(let m=0;m<o.length-1;m++)o[m].setAttribute("tabindex",-1);d.value=e,o[d.value].focus(),o[d.value].removeAttribute("tabindex")}))},$=h(),Y=t=>{let n=t.target.dataset.date,e=document.querySelectorAll(`#${r.id} .date-item:not(.empty)`),o=n.split("-"),m=o[0],k=o[1],v=o[2],p,D={};i.value.forEach(f=>{f.selected=!1}),p=i.value.findIndex(f=>f.date==v),i.value[p].selected=!0,D.year=m,D.month=k,D.date=v,$.value=D,d.value=p,e[p].focus(),q("calAct",$.value)};return G(()=>{N(y.value)}),(t,n)=>(u(),c("div",{id:r.id,class:"calendar","aria-labelledby":`${r.id}-label`},[r.isMobile?(u(),c("button",{key:0,type:"button",class:"cal-close",onClick:n[0]||(n[0]=e=>q("calClose"))},Q)):b("",!0),s("div",W,[s("h1",{id:`${r.id}-label`,class:"calendar-tit","aria-live":"assertive"},[E(w(y.value.year),1),Z,j,E(" "+w(y.value.month<10?"0"+y.value.month:y.value.month),1),O],8,X),s("div",ee,[s("button",{type:"button",class:"prev-cal",onClick:n[1]||(n[1]=e=>_("prev")),"aria-controls":`${r.id}-body`},le,8,te),s("button",{type:"button",class:"next-cal",onClick:n[2]||(n[2]=e=>_("next")),"aria-controls":`${r.id}-body`},se,8,ne)])]),s("div",re,[s("div",{id:`${r.id}-body`,class:"calendar-wrap"},[s("div",de,[(u(!0),c(C,null,I(F.value,(e,o)=>(u(),c("div",{key:o,class:"yoil-item"},w(e),1))),128))]),s("div",ue,[g.value.length>0?(u(!0),c(C,{key:0},I(g.value,(e,o)=>(u(),c("button",{type:"button",key:o,class:"date-item empty prev","aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일`,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:"-1",onClick:Y},[s("span",null,w(e.date),1)],8,ce))),128)):b("",!0),(u(!0),c(C,null,I(i.value,(e,o)=>(u(),c("button",{type:"button",key:o,class:H(`date-item${e.empty?" empty":""}${e.now?" today":""}${e.selected?" sel":""}`),"aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일${e.now?" (오늘)":""}${e.selected?" (선택한 날짜)":""}`,"aria-selected":e.selected?e.selected:null,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:o!==d.value?-1:null,onClick:Y,onKeydown:K},[s("span",null,w(e.date),1)],42,ye))),128)),A.value.length>0?(u(!0),c(C,{key:1},I(A.value,(e,o)=>(u(),c("button",{type:"button",key:o,class:"date-item empty next","aria-label":`${e.year}년 ${e.month}월 ${e.date}일 ${e.day}요일`,"data-date":`${e.year}-${e.month}-${e.date}`,tabindex:"-1",onClick:Y},[s("span",null,w(e.date),1)],8,he))),128)):b("",!0)])],8,ie)])],8,J))}};export{ve as _};
