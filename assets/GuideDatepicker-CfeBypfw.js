import{p as J,d as n,e as x,i as Q,o as g,c as h,b as c,t as N,v as R,x as F,a as C,g as D,y as E,u as A}from"./index-B4WZRsmD.js";import{_ as U}from"./CalendarItem-BUXGTLvG.js";const X=["id"],Z={class:"form-item"},j=["for"],ee=["id"],ae=["id","aria-control"],se=c("span",{class:"sr-only"},"달력 보기",-1),te=[se],le=["aria-label"],ne={key:0,class:"form-item"},oe=["for"],ie=["id"],ce=["id","aria-control"],pe=c("span",{class:"sr-only"},"달력 보기",-1),re=[pe],de=["aria-label"],B={__name:"DatepickerItem",props:{id:{type:String},pickerOpt:{type:Object}},setup(P){const q=J("systemModal"),s=P,o=n(!1),M=()=>{let a=navigator.userAgent;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)?o.value=!0:o.value=!1},l=n({firstCal:!1,secondCal:!1}),r=n({}),Y=()=>{s.pickerOpt&&(r.value.type=s.pickerOpt.type,r.value.sLabel=s.pickerOpt.sLabel,r.value.eLabel=s.pickerOpt.eLabel,s.pickerOpt.start&&(m.value=s.pickerOpt.start,_.value={year:s.pickerOpt.start.split("-")[0],month:s.pickerOpt.start.split("-")[1],date:s.pickerOpt.start.split("-")[2]}),s.pickerOpt.end&&(f.value=s.pickerOpt.end,$.value={year:s.pickerOpt.end.split("-")[0],month:s.pickerOpt.end.split("-")[1],date:s.pickerOpt.end.split("-")[2]}))},I=n({year:x(()=>new Date().getFullYear()),month:x(()=>new Date().getMonth()+1),date:x(()=>new Date().getDate())}),H=n(I.value),m=n(),_=n({}),V=n(I.value),f=n(),$=n({}),K=(a,e)=>{let t=a.month<10?"0"+a.month:a.month,p=a.date<10?"0"+a.date:a.date;e=="start"?(m.value=`${a.year}-${t}-${p}`,_.value=a,H.value=a,l.value.firstCal=!1,y.value.focus()):e=="end"&&(f.value=`${a.year}-${t}-${p}`,$.value=a,V.value=a,l.value.secondCal=!1),o.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",S),document.removeEventListener("keydown",b),G(e)},G=a=>{let e=new Date(m.value),t=new Date(f.value);e>t&&W(a)},W=a=>{let e=document.querySelector(`#${s.id}-${a}-input`);q.open({id:"WrongPeriod",type:"alert",label:"알림 창",cont:`<p>${r.value.eLabel}이 ${r.value.sLabel}보다 빠릅니다.<br />다시 선택해 주세요.</p>`,okText:"확인",okCallback:()=>{e.focus(),E(()=>{a=="start"?(m.value="",_.value={}):a=="end"&&(f.value="",$.value={})})}})},L=a=>{let e=window.innerHeight,t=document.querySelector(`#${s.id}-${a}-input`),p=t.getBoundingClientRect().height,d=t.getBoundingClientRect().top,v=document.querySelector(`#${s.id}-start-btn`),O=document.querySelector(`#${s.id}-end-btn`);if(a=="start"?(l.value.firstCal=!l.value.firstCal,l.value.secondCal=!1,y.value=v,E(()=>{if(l.value.firstCal){let i=document.querySelector(`#${s.id}-calendar-start`).closest(".dialog-calendar"),u=i.getBoundingClientRect().height,k=d+p+u;e>k?i.classList.remove("top"):i.classList.add("top"),i.focus()}})):(l.value.firstCal=!1,l.value.secondCal=!l.value.secondCal,y.value=O,E(()=>{if(l.value.secondCal){let i=document.querySelector(`#${s.id}-calendar-end`).closest(".dialog-calendar"),u=i.getBoundingClientRect().height,k=d+p+u;e>k?i.classList.remove("top"):i.classList.add("top"),i.focus()}})),o.value){let i=document.querySelector("body");i.style.overflowY="hidden"}document.addEventListener("click",S),document.addEventListener("keydown",b)},y=n(),w=n([]),S=a=>{let e=a.target,t=e.classList.value,p=document.querySelector(`#${s.id}-start-input`),d=document.querySelector(`#${s.id}-end-input`),v=l.value.firstCal?p:d,O=document.querySelector(".dialog-calendar");(l.value.firstCal||l.value.secondCal)&&(O.querySelectorAll("div, h1, button, span").forEach(u=>{let k=u.classList.value;w.value.findIndex(z=>z==k)<0&&w.value.push(k)}),w.value.findIndex(u=>u==t)<0&&!e.closest("form-item")&&!e.classList.contains("cal-btn")&&e!=v&&(l.value.firstCal=!1,l.value.secondCal=!1,E(()=>{y.value.focus(),o.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",S),document.removeEventListener("keydown",b)})))},b=a=>{if(a.key=="Tab"){let e=document.activeElement,t=document.querySelector(".dialog-calendar"),p=t.querySelectorAll('.date-item:not([tabindex="-1"]), .prev-cal, .next-cal, .cal-close'),d=p[0],v=p[p.length-1];o.value?a.shiftKey&&(e==d||e==t)?(a.preventDefault(),v.focus()):!a.shiftKey&&e==v&&(a.preventDefault(),d.focus()):(a.shiftKey&&e==d||a.shiftKey&&e==t||!a.shiftKey&&e==v)&&(a.preventDefault(),l.value.firstCal=!1,l.value.secondCal=!1,y.value.focus(),o.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("keydown",b))}},T=()=>{o.value&&(l.value.firstCal=!1,l.value.secondCal=!1,document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",S),document.removeEventListener("keydown",b))};return Q(()=>{Y(),M()}),(a,e)=>(g(),h("div",{id:s.id,class:"form-wrap datepicker"},[c("div",Z,[c("label",{for:`${s.id}-start-input`,class:"form-label"},N(r.value.sLabel),9,j),R(c("input",{type:"tel",id:`${s.id}-start-input`,name:"start",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),readonly:"",onClick:e[1]||(e[1]=t=>L("start"))},null,8,ee),[[F,m.value]]),c("button",{type:"button",id:`${s.id}-start-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${s.id}-calendar-start`,onClick:e[2]||(e[2]=t=>L("start"))},te,8,ae),l.value.firstCal?(g(),h("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.sLabel} 달력`,tabindex:"-1"},[C(U,{id:`${s.id}-calendar-start`,"is-mobile":o.value,"setup-date":H.value,"checked-date":_.value,onCalAct:e[3]||(e[3]=t=>K(t,"start")),onCalClose:T},null,8,["id","is-mobile","setup-date","checked-date"])],8,le)):D("",!0)]),r.value.type=="period"?(g(),h("div",ne,[c("label",{for:`${s.id}-end-input`,class:"form-label"},N(r.value.eLabel),9,oe),R(c("input",{type:"tel",id:`${s.id}-end-input`,name:"end",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),readonly:"",onClick:e[5]||(e[5]=t=>L("end"))},null,8,ie),[[F,f.value]]),c("button",{type:"button",id:`${s.id}-end-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${s.id}-calendar-end`,onClick:e[6]||(e[6]=t=>L("end"))},re,8,ce),l.value.secondCal?(g(),h("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.eLabel} 달력`,tabindex:"-1"},[C(U,{id:`${s.id}-calendar-end`,"is-mobile":o.value,"setup-date":V.value,"checked-date":$.value,onCalAct:e[7]||(e[7]=t=>K(t,"end")),onCalClose:T},null,8,["id","is-mobile","setup-date","checked-date"])],8,de)):D("",!0)])):D("",!0)],8,X))}},ue={class:"contents"},ve=A(`<h2 class="guide-title">Datepicker</h2><h3 class="guide-stitle">1. Basic</h3><div class="guide-info script"><pre><span class="comment">// component import</span>
<span class="import">import</span> <span class="props">DatepickerItem</span> <span class="import">from</span> <span class="val">&#39;@/components/DatepickerItem.vue&#39;</span>;

<span class="comment">/** datepicker type option
 * 1. sLabel: picker의 label
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">sLabel:</span> <span class="val">&#39;날짜 선택&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">datepicker-item</span>
    <span class="props">id</span>=<span class="val">&quot;PickerSample1&quot;</span>
    :<span class="props">picker-opt</span>=&quot;<span class="props">pickerOpt</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">datepicker-item</span><span class="arrow">&gt;</span>
</pre></div>`,4),me={class:"guide-cont"},fe=A(`<h3 class="guide-stitle">2. Period</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. eLable: 두 번째 picker의 label; type이 single일 때는 생략
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div>`,2),ke={class:"guide-cont"},ye=A(`<h3 class="guide-stitle">3. 첫 번째 혹은 두 번째 날짜 값이 있을 때</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. start: 선택된 첫 번째 날짜가 있을 때
 * 4. eLable: 두 번째 picker의 label
 * 5. end: 선택된 두 번째 날짜가 있을 때
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">start:</span> <span class="val">&#39;2024-07-15&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>,
    <span class="props">end:</span> <span class="val">&#39;2024-07-30&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div>`,2),be={class:"guide-cont"},Ce={__name:"GuideDatepicker",setup(P){const q=n({sLabel:"날짜 선택"}),s=n({type:"period",sLabel:"시작일",eLabel:"종료일"}),o=n({type:"period",sLabel:"시작일",start:"2024-07-15",eLabel:"종료일",end:"2024-07-30"});return(M,l)=>(g(),h("div",ue,[ve,c("div",me,[C(B,{id:"PickerSample1","picker-opt":q.value},null,8,["picker-opt"])]),fe,c("div",ke,[C(B,{id:"PickerSample2","picker-opt":s.value},null,8,["picker-opt"])]),ye,c("div",be,[C(B,{id:"PickerSample3","picker-opt":o.value},null,8,["picker-opt"])])]))}};export{Ce as default};
