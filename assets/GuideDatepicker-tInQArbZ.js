import{q as W,d as n,e as E,k as J,o as f,c as m,b as o,t as H,y as V,z as I,a as L,l as g,j as $,v as N}from"./index-DEtDSvmh.js";import{_ as K}from"./CalendarItem-Dk_hdQWw.js";const Q=["id"],X={class:"form-item"},Z=["for"],j=["id"],ee=["id","aria-control"],ae=o("span",{class:"sr-only"},"달력 보기",-1),te=[ae],se=["aria-label"],le={key:0,type:"button",class:"cal-close"},ne=o("span",{class:"sr-only"},"달력 닫기",-1),oe=[ne],ie={key:0,class:"form-item"},ce=["for"],re=["id"],de=["id","aria-control"],pe=o("span",{class:"sr-only"},"달력 보기",-1),ue=[pe],ve=["aria-label"],fe={key:0,type:"button",class:"cal-close"},me=o("span",{class:"sr-only"},"달력 닫기",-1),ye=[me],T={__name:"DatepickerItem",props:{id:{type:String},pickerOpt:{type:Object}},setup(B){const S=W("systemModal"),t=B,d=n(!1),O=()=>{let a=navigator.userAgent;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)?d.value=!0:d.value=!1},l=n({firstCal:!1,secondCal:!1}),r=n({}),R=()=>{t.pickerOpt&&(r.value.type=t.pickerOpt.type,r.value.sLabel=t.pickerOpt.sLabel,r.value.eLabel=t.pickerOpt.eLabel)},P=n({year:E(()=>new Date().getFullYear()),month:E(()=>new Date().getMonth()+1),date:E(()=>new Date().getDate())}),F=n(P.value),k=n(),q=n({}),U=n(P.value),b=n(),w=n({}),A=(a,e)=>{let s=a.month<10?"0"+a.month:a.month,c=a.date<10?"0"+a.date:a.date;e=="start"?(k.value=`${a.year}-${s}-${c}`,q.value=a,l.value.firstCal=!1,h.value.focus()):e=="end"&&(b.value=`${a.year}-${s}-${c}`,w.value=a,l.value.secondCal=!1),Y(e)},Y=a=>{let e=new Date(k.value),s=new Date(b.value);e>s&&z(a)},z=a=>{let e=document.querySelector(`#${t.id}-${a}-input`);S.open({id:"WrongPeriod",type:"alert",label:"알림 창",cont:`<p>${r.value.eLabel}이 ${r.value.sLabel}보다 빠릅니다.<br />다시 선택해 주세요.</p>`,okText:"확인",okCallback:()=>{e.focus(),$(()=>{a=="start"?(k.value="",q.value={}):a=="end"&&(b.value="",w.value={})})}})},_=a=>{let e=window.innerHeight,s=document.querySelector(`#${t.id}-${a}-input`),c=s.getBoundingClientRect().height,p=s.getBoundingClientRect().top,v=document.querySelector(`#${t.id}-start-btn`),C=document.querySelector(`#${t.id}-end-btn`);if(a=="start"?(l.value.firstCal=!l.value.firstCal,l.value.secondCal=!1,h.value=v,$(()=>{if(l.value.firstCal){let i=document.querySelector(`#${t.id}-calendar-start`).closest(".dialog-calendar"),u=i.getBoundingClientRect().height,y=p+c+u;e>y?i.classList.remove("top"):i.classList.add("top"),i.focus()}})):(l.value.firstCal=!1,l.value.secondCal=!l.value.secondCal,h.value=C,$(()=>{if(l.value.secondCal){let i=document.querySelector(`#${t.id}-calendar-end`).closest(".dialog-calendar"),u=i.getBoundingClientRect().height,y=p+c+u;e>y?i.classList.remove("top"):i.classList.add("top"),i.focus()}})),d.value){let i=document.querySelector("body");i.style.overflowY="hidden"}document.addEventListener("click",M),document.addEventListener("keydown",D)},h=n(),x=n([]),M=a=>{let e=a.target,s=e.classList.value,c=document.querySelector(`#${t.id}-start-input`),p=document.querySelector(`#${t.id}-end-input`),v=l.value.firstCal?c:p,C=document.querySelector(".dialog-calendar");(l.value.firstCal||l.value.secondCal)&&(C.querySelectorAll("div, h1, button, span").forEach(u=>{let y=u.classList.value;x.value.findIndex(G=>G==y)<0&&x.value.push(y)}),x.value.findIndex(u=>u==s)<0&&!e.closest("form-item")&&!e.classList.contains("cal-btn")&&e!=v&&(l.value.firstCal=!1,l.value.secondCal=!1,$(()=>{h.value.focus(),d.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("click",M),document.removeEventListener("keydown",D)})))},D=a=>{if(a.key=="Tab"){let e=document.activeElement,s=document.querySelector(".dialog-calendar"),c=s.querySelectorAll('.date-item:not([tabindex="-1"]), .prev-cal, .next-cal'),p=c[0],v=c[c.length-1];d.value?a.shiftKey&&(e==p||e==s)?(a.preventDefault(),v.focus()):!a.shiftKey&&e==v&&(a.preventDefault(),p.focus()):(a.shiftKey&&e==p||a.shiftKey&&e==s||!a.shiftKey&&e==v)&&(a.preventDefault(),l.value.firstCal=!1,l.value.secondCal=!1,h.value.focus(),d.value&&document.querySelector("body").removeAttribute("style"),document.removeEventListener("keydown",D))}};return J(()=>{R(),O()}),(a,e)=>(f(),m("div",{id:t.id,class:"form-wrap datepicker"},[o("div",X,[o("label",{for:`${t.id}-start-input`,class:"form-label"},H(r.value.sLabel),9,Z),V(o("input",{type:"tel",id:`${t.id}-start-input`,name:"start",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),readonly:"",onClick:e[1]||(e[1]=s=>_("start"))},null,8,j),[[I,k.value]]),o("button",{type:"button",id:`${t.id}-start-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${t.id}-calendar-start`,onClick:e[2]||(e[2]=s=>_("start"))},te,8,ee),l.value.firstCal?(f(),m("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.sLabel} 날짜 선택 달력`,tabindex:"-1"},[L(K,{id:`${t.id}-calendar-start`,"setup-date":F.value,"checked-date":q.value,onCalAct:e[3]||(e[3]=s=>A(s,"start"))},null,8,["id","setup-date","checked-date"]),d.value?(f(),m("button",le,oe)):g("",!0)],8,se)):g("",!0)]),r.value.type=="period"?(f(),m("div",ie,[o("label",{for:`${t.id}-end-input`,class:"form-label"},H(r.value.eLabel),9,ce),V(o("input",{type:"tel",id:`${t.id}-end-input`,name:"end",class:"inp-box",placeholder:"날짜를 선택해 주세요","onUpdate:modelValue":e[4]||(e[4]=s=>b.value=s),readonly:"",onClick:e[5]||(e[5]=s=>_("end"))},null,8,re),[[I,b.value]]),o("button",{type:"button",id:`${t.id}-end-btn`,class:"cal-btn","aria-haspopup":"dialog","aria-control":`${t.id}-calendar-end`,onClick:e[6]||(e[6]=s=>_("end"))},ue,8,de),l.value.secondCal?(f(),m("div",{key:0,class:"dialog-calendar",role:"dialog","aria-modal":"true","aria-label":`${r.value.eLabel} 날짜 선택 달력`,tabindex:"-1"},[L(K,{id:`${t.id}-calendar-end`,"setup-date":U.value,"checked-date":w.value,onCalAct:e[7]||(e[7]=s=>A(s,"end"))},null,8,["id","setup-date","checked-date"]),d.value?(f(),m("button",fe,ye)):g("",!0)],8,ve)):g("",!0)])):g("",!0)],8,Q))}},ke={class:"contents"},be=N(`<h2 class="guide-title">Datepicker</h2><h3 class="guide-stitle">1. Basic</h3><div class="guide-info script"><pre><span class="comment">/** datepicker type option
 * 1. sLabel: picker의 label
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">sLabel:</span> <span class="val">&#39;날짜 선택&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">datepicker-item</span>
    <span class="props">id</span>=<span class="val">&quot;PickerSample1&quot;</span>
    :<span class="props">picker-opt</span>=&quot;<span class="props">pickerOpt</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">datepicker-item</span><span class="arrow">&gt;</span>
</pre></div>`,4),he={class:"guide-cont"},ge=N(`<h3 class="guide-stitle">2. Period</h3><div class="guide-info script"><pre><span class="comment">/** 기간 선택 datepicker type option
 * 1. type: datepicker 종류, single or period
 * 2. sLabel: 첫 번째 picker의 label
 * 3. eLable: 두 번째 picker의 label; type이 single일 때는 생략
 */</span>
<span class="tag">const</span> <span class="evt">pickerOpt2</span> = <span class="func">ref</span><span class="mark">(</span><span class="func">{</span>
    <span class="props">type:</span> <span class="val">&#39;period&#39;</span>,
    <span class="props">sLabel:</span> <span class="val">&#39;시작일&#39;</span>,
    <span class="props">eLabel:</span> <span class="val">&#39;종료일&#39;</span>
<span class="func">}</span><span class="mark">)</span>;
</pre></div><div class="guide-info html"><pre><span class="arrow">&lt;</span><span class="component">datepicker-item</span>
    <span class="props">id</span>=<span class="val">&quot;PickerSample2&quot;</span>
    :<span class="props">picker-opt</span>=&quot;<span class="props">pickerOpt2</span>&quot;
<span class="arrow">&gt;&lt;/</span><span class="component">datepicker-item</span><span class="arrow">&gt;</span>
</pre></div>`,3),_e={class:"guide-cont"},Le={__name:"GuideDatepicker",setup(B){const S=n({sLabel:"날짜 선택"}),t=n({type:"period",sLabel:"시작일",eLabel:"종료일"});return(d,O)=>(f(),m("div",ke,[be,o("div",he,[L(T,{id:"PickerSample1","picker-opt":S.value},null,8,["picker-opt"])]),ge,o("div",_e,[L(T,{id:"PickerSample2","picker-opt":t.value},null,8,["picker-opt"])])]))}};export{Le as default};
